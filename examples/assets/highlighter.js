import{C as b,l as u,c as h,a as g,b as f}from"./index-BET5fVdQ.js";import{C as w,W as y,S as C,O as v,F as k,R as I,M as S}from"./graphic-vertex-picker-D88BIZW2.js";import{P as H}from"./index-oGDxbV82.js";import{H as L}from"./index-CgGl_Ams.js";const l=new w,M=l.get(y),t=M.create();t.scene=new C(l);t.scene.setup();t.scene.three.background=null;const U=document.getElementById("container");t.renderer=new H(l,U);t.camera=new v(l);await t.camera.controls.setLookAt(68,23,-8.5,21.5,-5.5,23);l.init();const R="https://thatopen.github.io/engine_fragment/resources/worker.mjs",F=await fetch(R),O=await F.blob(),P=new File([O],"worker.mjs",{type:"text/javascript"}),j=URL.createObjectURL(P),n=l.get(k);n.init(j);t.camera.controls.addEventListener("update",()=>n.core.update());t.onCameraChanged.add(e=>{for(const[,s]of n.list)s.useCamera(e.three);n.core.update(!0)});n.list.onItemSet.add(({value:e})=>{e.useCamera(t.camera.three),t.scene.three.add(e.object),n.core.update(!0)});n.core.models.materials.list.onItemSet.add(({value:e})=>{"isLodMaterial"in e&&e.isLodMaterial||(e.polygonOffset=!0,e.polygonOffsetUnits=1,e.polygonOffsetFactor=Math.random())});const B=["https://thatopen.github.io/engine_components/resources/frags/school_arq.frag"];await Promise.all(B.map(async e=>{var r;const s=(r=e.split("/").pop())==null?void 0:r.split(".").shift();if(!s)return null;const d=await(await fetch(e)).arrayBuffer();return n.core.load(d,{modelId:s})}));l.get(I).get(t);const o=l.get(L);o.setup({world:t,selectMaterialDefinition:{color:new b("#bcf124"),opacity:1,transparent:!1,renderedFaces:0}});o.events.select.onHighlight.add(async e=>{console.log("Something was selected");const s=[];for(const[d,r]of Object.entries(e)){const p=n.list.get(d);p&&s.push(p.getItemsData([...r]))}const m=(await Promise.all(s)).flat();console.log(m)});o.events.select.onClear.add(()=>{console.log("Selection was cleared")});const a="Red";o.styles.set(a,{color:new b("red"),opacity:1,transparent:!1,renderedFaces:0});o.events[a].onHighlight.add(e=>{console.log("Highligthed with red",e)});o.events[a].onClear.add(e=>{console.log("Red highlighter cleared",e)});const $=async()=>{if(!o.styles.has(a))return;const e=o.selection.select;S.isEmpty(e)||await o.highlightByID(a,e,!1)},A=async(e=!0)=>{if(!o.styles.has(a))return;const s=o.selection.select;await o.clear(a,e?s:void 0),await o.clear("select")};u.init();const c=h.create(()=>g`
    <bim-panel active label="Highlighter Tutorial" class="options-menu">
      <bim-panel-section label="Controls">
        <bim-label>Click: single-selection</bim-label>
        <bim-label>Ctrl + click: multi-selection</bim-label>
      </bim-panel-section>
      <bim-panel-section label="Actions">
        <bim-label style="white-space: normal; width: 14rem;">Select some items, click the apply button, and then deselect them again to see the color applied</bim-label>
        <bim-button @click=${$} label="Apply ${a}"></bim-button>
        <bim-label style="white-space: normal; width: 14rem;">Select some item colored with red and apply the button. Then, deselect it to </bim-label>
        <bim-button @click=${A} label="Reset ${a}"></bim-button>
      </bim-panel-section>
    </bim-panel>
  `);document.body.append(c);const x=h.create(()=>g`
      <bim-button class="phone-menu-toggler" icon="solar:settings-bold"
        @click="${()=>{c.classList.contains("options-menu-visible")?c.classList.remove("options-menu-visible"):c.classList.add("options-menu-visible")}}">
      </bim-button>
    `);document.body.append(x);const i=new f;i.showPanel(2);document.body.append(i.dom);i.dom.style.left="0px";i.dom.style.zIndex="unset";t.renderer.onBeforeUpdate.add(()=>i.begin());t.renderer.onAfterUpdate.add(()=>i.end());
