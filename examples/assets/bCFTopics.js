import"./web-ifc-api-BlmMr04K.js";import{T as p,L as d,m as u}from"./index-C8nqhRYO.js";import{C as f,W as w,S as b,I as g,B as h,V as y,T as C}from"./index-BbAeqGYF.js";import{G as v}from"./index-BsNdHCFl.js";import{S as T,a as S}from"./simple-renderer-B7OGlKaA.js";import"./_commonjsHelpers-Cpj98o6Y.js";p.init();const l=document.createElement("bim-viewport"),t=new f,I=t.get(w),o=I.create();o.scene=new T(t);o.scene.setup();o.renderer=new S(t,l);o.camera=new b(t);const L=t.get(v);L.create(o);t.init();o.camera.controls.setLookAt(12,6,8,0,2,-2);const r=t.get(g);await r.setup();const B=await fetch("https://thatopen.github.io/engine_components/resources/small.ifc"),U=await B.arrayBuffer(),k=new Uint8Array(U),D=await r.load(k);o.scene.three.add(D);const i=t.get(h);i.setup({author:"signed.user@mail.com",types:new Set([...i.config.types,"Information","Coordination"]),statuses:new Set(["Active","In Progress","Done","In Review","Closed"]),users:new Set(["juan.hoyos4@gmail.com"])});const F=t.get(y);i.list.onItemSet.add(({value:e})=>{const n=F.create(o,{title:e.title});e.viewpoints.add(n.guid),e.comments.onItemSet.add(({value:a})=>{a.viewpoint=n})});const s=i.create({title:"Missing information",description:"It seems these elements are badly defined.",dueDate:new Date("08-01-2020"),type:"Clash",priority:"Major",stage:"Design",labels:new Set(["Architecture","Cost Estimation"]),assignedTo:"juan.hoyos@thatopen.com"});C.default={title:"Custom Default Title",type:"Custom Default Topic Type",status:"Custom Default Topic Status",priority:"Custom Default Priority"};const E=s.createComment("What if we talk about this next meeting?"),R=s.createComment("Hi there! I agree.");i.list.onItemUpdated.add(({value:e})=>{console.log(`Topic ${e.title} was updated!`)});s.title="Updated Title";s.set({title:"New Title"});s.comments.onItemUpdated.add(({value:e})=>{console.log("The following comment has been updated:",e)});E.comment="What if we talk about this next meeting with all partners?";R.comment="Will tell you tomorrow when is more convenient!";const j=async()=>{const e=await i.export(),n=new File([e],"topics.bcf"),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download=n.name,a.click(),URL.revokeObjectURL(a.href)},x=()=>{const e=document.createElement("input");e.multiple=!1,e.accept=".bcf",e.type="file",e.addEventListener("change",async()=>{var c;const n=(c=e.files)==null?void 0:c[0];if(!n)return;const a=await n.arrayBuffer();i.load(new Uint8Array(a),o)}),e.click()},A=d.create(()=>u`
    <bim-panel active label="BCFTopics Tutorial" class="options-menu">
      <bim-panel-section collapsed label="Controls">
        <bim-button @click=${j} label="Export BCF"></bim-button> 
        <bim-button @click=${x} label="Load BCF"></bim-button>
      </bim-panel-section>
    </bim-panel>
    `);document.body.append(A);const m=document.getElementById("app");m.layouts={main:{template:'"viewport"',elements:{viewport:l}}};m.layout="main";
