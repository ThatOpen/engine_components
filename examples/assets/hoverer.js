import{n as p,l as u,c as l,a as d,b as f,C as b}from"./index-BET5fVdQ.js";import{C as g,W as h,S as w,O as v,F as y}from"./graphic-vertex-picker-D88BIZW2.js";import{P as C}from"./index-oGDxbV82.js";import{H as L}from"./index-DKcTE0u5.js";import"./index-CtMoHNvK.js";const r=new g,k=r.get(h),t=k.create();t.scene=new w(r);t.scene.setup();t.scene.three.background=null;const U=document.getElementById("container");t.renderer=new C(r,U);t.camera=new v(r);await t.camera.controls.setLookAt(68,23,-8.5,21.5,-5.5,23);r.init();const S="https://thatopen.github.io/engine_fragment/resources/worker.mjs",M=await fetch(S),O=await M.blob(),P=new File([O],"worker.mjs",{type:"text/javascript"}),j=URL.createObjectURL(P),o=r.get(y);o.init(j);t.camera.controls.addEventListener("update",()=>o.core.update());t.onCameraChanged.add(e=>{for(const[,a]of o.list)a.useCamera(e.three);o.core.update(!0)});o.list.onItemSet.add(({value:e})=>{e.useCamera(t.camera.three),t.scene.three.add(e.object),o.core.update(!0)});o.core.models.materials.list.onItemSet.add(({value:e})=>{"isLodMaterial"in e&&e.isLodMaterial||(e.polygonOffset=!0,e.polygonOffsetUnits=1,e.polygonOffsetFactor=Math.random())});const B=["https://thatopen.github.io/engine_components/resources/frags/school_arq.frag"];await Promise.all(B.map(async e=>{var c;const a=(c=e.split("/").pop())==null?void 0:c.split(".").shift();if(!a)return null;const m=await(await fetch(e)).arrayBuffer();return o.core.load(m,{modelId:a})}));const n=r.get(L);n.world=t;n.enabled=!0;n.material=new p({color:6629591,transparent:!0,opacity:.5,depthTest:!1});u.init();const i=l.create(()=>{const e=({target:a})=>{"color"in n.material&&n.material.color instanceof b&&n.material.color.set(a.color)};return d`
    <bim-panel active label="Hoverer Tutorial" class="options-menu">
      <bim-panel-section label="Controls">
        <bim-color-input color="#${n.material.color.getHexString()}" label="Color" @input=${e}></bim-color-input>
      </bim-panel-section>
    </bim-panel>
  `});document.body.append(i);const F=l.create(()=>d`
      <bim-button class="phone-menu-toggler" icon="solar:settings-bold"
        @click="${()=>{i.classList.contains("options-menu-visible")?i.classList.remove("options-menu-visible"):i.classList.add("options-menu-visible")}}">
      </bim-button>
    `);document.body.append(F);const s=new f;s.showPanel(2);document.body.append(s.dom);s.dom.style.left="0px";s.dom.style.zIndex="unset";t.renderer.onBeforeUpdate.add(()=>s.begin());t.renderer.onAfterUpdate.add(()=>s.end());
